{% extends "base.html" %}

{% block title %}Portada{% endblock %}

{% block content %}

<div class="container gap-md-3">

  <!-- Sección de productos del momento -->
  <section>
    <h2 class="h4 fw-bold">Productos del momento</h2>
    <p class="text-muted small">Selección de productos destacados</p>
    
    <div class="card text-bg-dark border-0">
      <img src="https://prod-mercadona.imgix.net/images/6f1d28dbc7d10115593769c392dbdbca.jpg" 
           class="card-img" 
           alt="Truco o trato" 
           style="max-height: 300px; object-fit: cover;">
      
      <div class="card-img-overlay d-flex align-items-end">
        <a href="/tienda/search-results?q=" class="btn btn-outline-light rounded-pill">Ver productos</a>
      </div>
    </div>
  </section>

  <hr class="my-4">

  <!-- Sección de bajadas de precio -->
  <section>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <h2 class="h5 fw-bold">Bajadas de precio</h2>
        <p class="text-muted small">Échales un vistazo</p>
      </div>
      <a href="/tienda/search-results?q=" class="text-decoration-none mb-3 d-inline-block">Ver todas las bajadas de precio &gt;</a>
    </div>

    <div class="overflow-x-auto">
      <div class="d-flex gap-3 flex-nowrap">
        {% for product in products %}
        <div class="col-auto">
          <div class="card" style="width: 12rem">
            <img src="{{ product.img_src }}" class="img-fluid rounded mx-auto d-block" style="max-width: 150px;" alt="{{ product.img_alt }}">
            <div class="card-body">
              <h5 class="card-title">{{ product.subcategory }}</h5>
              <p class="card-text">{{ product.format_text }}</p>
              <p class="card-text"><strong>{{ product.price_text }}</strong></p>
              <a href="/cart/{{ product._id }}" class="btn w-100 btn-outline-primary rounded-pill">Añadir al carro</a>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>
</div>

{% endblock %}